--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 9.0.908
--   Created On : miércoles, 30 marzo, 2016 
--   DBMS       : SQL Server 2008 
--   -------------------------------------------------- 


--  Drop Foreign Key Constraints 
IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('FK_UsUsuarios_UsTipoUsuario') AND OBJECTPROPERTY(id, 'IsForeignKey') = 1)
ALTER TABLE UsUsuarios DROP CONSTRAINT FK_UsUsuarios_UsTipoUsuario
;


--  Drop Tables, Stored Procedures and Views 

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('UsUsuarios') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE UsUsuarios
;

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id('UsTipoUsuario') AND  OBJECTPROPERTY(id, 'IsUserTable') = 1)
DROP TABLE UsTipoUsuario
;


--  Create Tables 
CREATE TABLE UsUsuarios ( 
	IdUsuario int identity(1,1)  NOT NULL,
	Usuario varchar(50) NOT NULL,
	Contrasena varchar(50) NOT NULL,
	IdTipoUsuario int
)
;

CREATE TABLE UsTipoUsuario ( 
	IdTipoUsuario int NOT NULL,
	TipoUsuario varchar(max),
	Descripcion varchar(max)
)
;


--  Create Indexes 
ALTER TABLE UsUsuarios
	ADD CONSTRAINT UQ_UsUsuarios_Usuario UNIQUE (Usuario)
;

--  Create Primary Key Constraints 
ALTER TABLE UsUsuarios ADD CONSTRAINT PK_UsUsuarios 
	PRIMARY KEY CLUSTERED (IdUsuario)
;

ALTER TABLE UsTipoUsuario ADD CONSTRAINT PK_UsTipoUsuario 
	PRIMARY KEY CLUSTERED (IdTipoUsuario)
;



--  Create Foreign Key Constraints 
ALTER TABLE UsUsuarios ADD CONSTRAINT FK_UsUsuarios_UsTipoUsuario 
	FOREIGN KEY (IdTipoUsuario) REFERENCES UsTipoUsuario (IdTipoUsuario)
;
