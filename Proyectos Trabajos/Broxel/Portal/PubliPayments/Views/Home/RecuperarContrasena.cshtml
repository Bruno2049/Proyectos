@using PubliPayments.Models
@model RecuperarContrasenia
@{
    Layout = null;
}

<style>
    .ErrorEjemplo {
        font-size: 14px;
        font-weight: 300;
        font-family: "Open Sans", sans-serif;
        height: 34px;
        width: 383px;
        margin: auto;
        color: #3E4D03;
        background: #ACD90B;
        border: 1px #86A608;
        -webkit-border-radius: 6px;
        -moz-border-radius: 6px;
        -ms-border-radius: 6px;
        border-radius: 6px;
    }

    #Mensaje {
        display: none;
        padding-top: 5px;
        height: 19px;
        margin: auto;
        width: 350px;
    }
</style>

<link href="@HttpContext.Current.Application["AplicacionLogos"]faviconyy.png" rel="shortcut icon" type="image/x-icon" />
<link rel="icon" type="image/png" href="@HttpContext.Current.Application["AplicacionLogos"]faviconyy.png">
<meta name="viewport" content="width=device-width" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
<link href="~/Styles/Principal.css?version=1.0" rel="stylesheet" type="text/css" />
<link href="~/Styles/normalize.css?version=1.0" rel="stylesheet" type="text/css" />
<script src="~/Scripts/jquery-1.11.0.min.js"></script>
<script src="~/Scripts/watermark.js" type="text/javascript"></script>
<script src="~/Scripts/restrictors.js?version=3.0"></script>
<script>
    function updateTips(t) {
        $("#Mensaje").html(t);
        $("#Mensaje").show();
        setTimeout(function () { $("#Mensaje").hide(); }, 6000);
    }

    function validarPass() {
        var mostrarMensaje = false;
        if ($("#tbPassword").val().trim() == "" || $("#tbVerificar").val().trim() == "") {
            updateTips("Por favor llene todos los campos");
            mostrarMensaje = true;
        }
        if ($("#tbPassword").val() != $("#tbVerificar").val() && !mostrarMensaje) {
            updateTips("La nueva Contraseña y la confirmación no coincide");
            mostrarMensaje = true;
        }
        if ($.trim($("#tbPassword").val()) != "" && $.trim($("#tbVerificar").val()) != "" && !mostrarMensaje) {
            if (validatePassU($("#tbPassword")) && validatePassU($("#tbVerificar"))) {
                updateTips("Contraseña invalida");
                mostrarMensaje = true;
            }
        }
        if (!mostrarMensaje) {
            if (BloquearMultiplesClicks(this)) {
                return true;
            }
        }
        return false;
    }

    $(document).ready(function () {
        $($("#tbPassword,#tbVerificar")).blur(function () {
            if ($(this).val() != "") {
                if (validatePassU($(this))) {
                    updateTips("Contraseña invalida");
                    $("#lblMensaje").hide();
                }
            }
        });
    });
</script>
<div id="Content1">
    @using (@Html.BeginForm("RecuperarContrasena", "Home", new {key = @ViewBag.Key}, FormMethod.Post))
    {
        <div style="margin-top: 86px;">
            <a style="outline: none" href="@Url.Action("Index", "Home")">
                <img style="border: 0" src="~/imagenes/Logos@{@ViewBag.LogosDir}/logo-login-gm.png" />
            </a>
        </div>
        <div style="margin-top: 30px; margin-bottom: 20px">
            <label class="InicioSesion" id="lblTitulo">Recuperar Contraseña</label>
        </div>
        <div id="ContainerValidKey" style="display: @ViewBag.ContainerValidKey}">
            <div class="Combos" style="width: 360px; position: relative; left: 50%; margin-left: -180px; margin-top: 26px;">
                @Html.TextBoxFor(m => m.lblDominio, new { @class = "TextoLogin", onkeypress = "return validateStringD(event)", size = "50", tabindex = 1, placeholder = "Dominio" })
                <br />
                <div style="width: 360px; height: 1px; background-color: #D9D9D9"></div>
                @Html.TextBoxFor(m => m.lblUsuario, new { @class = "TextoLogin", onkeypress = "return validateStringD(event)", size = "50", tabindex = 2, placeholder = "Usuario" })
                <br />
                <div style="width: 360px; height: 1px; background-color: #D9D9D9"></div>
                <a href="#" alt="Al menos una letra minúscula (a-z), una letra mayúscula (A-Z) y un carácter numérico (0 - 9) o un carácter especial (# $ & / +). (No repetir contraseñas anteriores, longitud min 8 caracteres)" class="tooltipDemo">
                    @Html.PasswordFor(m => m.tbPassword, new { @class = "Combos TextoLogin AlinearIzquierda", style = "width: 100%;", size = 20, placeholder = "Nueva Contraseña", tabindex = 3 })
                </a>
                <br />
                <div style="width: 360px; height: 1px; background-color: #D9D9D9"></div>
                <a href="#" alt="Al menos una letra minúscula (a-z), una letra mayúscula (A-Z) y un carácter numérico (0 - 9) o un carácter especial (# $ & / +). (No repetir contraseñas anteriores, longitud min 8 caracteres)" class="tooltipDemo">
                    @Html.PasswordFor(m => m.tbVerificar, new { @class = "Combos TextoLogin AlinearIzquierda", style = "width: 100%;", size = 20, placeholder = "Verificar Contraseña", tabindex = 4 })
                </a>
                <br />
            </div>
        </div>
        <p id="Mensaje" class="MensajeAlerta"></p>
        if (ViewBag.lblMensaje != null)
        {
            <div style="padding: 10px; height: 50px;" id="ErrorContainer">
                <label id="lblMensaje" class="MensajeAlerta">@ViewBag.lblMensaje</label>
            </div>
        }
        <div style="padding: 10px; margin: auto;">
            <input type="submit" id="btRecuperar" class="Botones" onClick="return validarPass();" value="Cambiar Contraseña" style="font-size: 18px;width: 360px; height: 50px;" tabindex="5" />
        </div>
        <div id="ContainerInvalidKey" style="display:@ViewBag.ContainerInvalidKey">
            <div>
                <label style="font-size: 20px;" class="MensajeAlerta">Link inválido</label>
            </div>
        </div>
        <div style="margin-top: 22px">
            <div style="margin-top: 46px">
                <img alt="" src="~/imagenes/Logos@{@ViewBag.LogosDir}/logoYY-login-footer.png" />
            </div>
        </div>
    }
</div>


<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-53857718-1', 'auto');
    ga('require', 'linkid', 'linkid.js');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
</script>