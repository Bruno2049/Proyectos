@using PubliPayments.Entidades;
@using System.Web.UI.WebControls
@using System.Windows.Forms.VisualStyles
@using HorizontalAlign = System.Web.UI.WebControls.HorizontalAlign
@model List<PubliPayments.Entidades.ArchivosModel>
@{
    var tipoGrid = Model.Select(f => f.Tipo).FirstOrDefault();
}

@Html.DevExpress().GridView(settings =>
{
    settings.Name = "gv" + tipoGrid;
    settings.ControlStyle.CssClass = "myCenteredGrid";
    settings.CallbackRouteValues = new { Controller = "Archivos", Action = "NextPage", tipo = tipoGrid };
    settings.SettingsPager.PageSize = 50;


    settings.Columns.Add(column => { column.FieldName = "id"; column.Caption = "id"; column.CellStyle.HorizontalAlign = HorizontalAlign.Left; });
    settings.Columns.Add(column => { column.FieldName = "Archivo"; column.Caption = "Archivo"; column.CellStyle.HorizontalAlign = HorizontalAlign.Left; });
    settings.Columns.Add(column => { column.FieldName = "Tipo"; column.Caption = "Tipo"; column.CellStyle.HorizontalAlign = HorizontalAlign.Left; });
    settings.Columns.Add(column => { column.FieldName = "Tiempo"; column.Caption = "Tiempo"; column.CellStyle.HorizontalAlign = HorizontalAlign.Left; });
    settings.Columns.Add(column => { column.FieldName = "Registros"; column.Caption = "Registros"; column.CellStyle.HorizontalAlign = HorizontalAlign.Left; });
    settings.Columns.Add(column => { column.FieldName = "Fecha"; column.Caption = "Fecha"; column.CellStyle.HorizontalAlign = HorizontalAlign.Left; });
    settings.Columns.Add(column => { column.FieldName = "Estatus"; column.Caption = "Estatus"; column.CellStyle.HorizontalAlign = HorizontalAlign.Left; });
    settings.Columns.Add(column =>
    {
        column.FieldName = "Error";
        column.Caption = "Error";
        column.SetDataItemTemplateContent(c =>
        {
            if (((Int32)DataBinder.Eval(c.DataItem, "Error")) > 0)
            {
                var id = ((Int32)DataBinder.Eval(c.DataItem, "id"));
                ViewContext.Writer.Write("<input type='button' value='Descargar' onclick='OnGetId(\"" + id + "\");' />");
            }
        });
    });
}).Bind(Model).GetHtml()

