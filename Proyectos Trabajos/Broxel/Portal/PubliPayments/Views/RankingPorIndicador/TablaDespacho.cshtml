@using System.Web.UI.WebControls
@using System.Windows.Forms.VisualStyles
@using HorizontalAlign = System.Web.UI.WebControls.HorizontalAlign

@Html.DevExpress().GridView(
    settings =>
    {
        settings.Name = "GridDespacho";
        settings.CallbackRouteValues = new { Controller = "RankingPorIndicador", Action = "TablaDespacho", tipoDashboard = ViewData["tipoDashboard"], indicador = ViewData["indicador"] };
        settings.Width = Unit.Percentage(90);

        settings.KeyFieldName = "Identificador";
    settings.Columns.Add(column =>
    {
        column.FieldName = "Posicion";
        column.Caption = @"Posición";
        column.CellStyle.HorizontalAlign = HorizontalAlign.Right;
    });
    settings.Columns.Add(column =>
    {
        column.FieldName = "Identificador";
        column.Caption = @"Nombre Corto";
        column.CellStyle.HorizontalAlign = HorizontalAlign.Left;
    });            
        settings.Columns.Add(column =>
        {
            column.FieldName = "Nombre";
            column.Caption = @"Nombre";
            column.CellStyle.HorizontalAlign = HorizontalAlign.Left;
        });
        settings.Columns.Add(column =>
        {
            column.FieldName = "Valor";
            column.Caption = @"Valor";
            column.CellStyle.HorizontalAlign = HorizontalAlign.Right;
        });

        settings.SettingsDetail.AllowOnlyOneMasterRowExpanded = true;
        settings.SettingsDetail.ShowDetailRow = true;

        settings.SetDetailRowTemplateContent(c => Html.RenderAction("TablaDelegaciones", new { tipoDashboard = ViewData["tipoDashboard"], indicador = ViewData["indicador"], despacho = DataBinder.Eval(c.DataItem, "Identificador"), valor = DataBinder.Eval(c.DataItem, "Valor") }));
        settings.PreRender = (sender, e) => {
            //((MVCxGridView)sender).DetailRows.ExpandRow(0);
        };
    }).Bind(Model).GetHtml()