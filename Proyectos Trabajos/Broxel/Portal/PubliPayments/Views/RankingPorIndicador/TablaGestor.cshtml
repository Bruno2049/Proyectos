@using System.Web.UI.WebControls

@Html.DevExpress().GridView(
    settings =>
    {
        settings.Name = "GridGestor_" + ViewData["supervisor"];
        settings.CallbackRouteValues = new { Controller = "RankingPorIndicador", Action = "TablaGestor", tipoDashboard = ViewData["tipoDashboard"], indicador = ViewData["indicador"], despacho = ViewData["despacho"], supervisor = ViewData["supervisor"], valor = ViewData["valor"], delegacion = ViewData["delegacion"] };
        settings.Width = Unit.Percentage(90);

        settings.KeyFieldName = "Identificador";
        
        settings.Columns.Add(column =>
        {
            column.FieldName = "Posicion";
            column.Caption = @"Posición";
            column.CellStyle.HorizontalAlign = HorizontalAlign.Right;
        });
        settings.Columns.Add(column =>
        {
            column.FieldName = "Usuario";
            column.Caption = @"Usuario";
            column.CellStyle.HorizontalAlign = HorizontalAlign.Left;
        });
        settings.Columns.Add(column =>
        {
            column.FieldName = "Nombre";
            column.Caption = @"Nombre";
            column.CellStyle.HorizontalAlign = HorizontalAlign.Left;
        });
        settings.Columns.Add(column =>
        {
            column.FieldName = "Valor";
            column.Caption = @"Valor";
            column.CellStyle.HorizontalAlign = HorizontalAlign.Right;
        });
        settings.Columns.Add(column =>
        {
            column.FieldName = "Porcentaje";
            column.Caption = @"Porcentaje";
            column.CellStyle.HorizontalAlign = HorizontalAlign.Right;
            column.PropertiesEdit.DisplayFormatString = @"{0}%";
        });

        if ((String) ViewData["tipoDashboard"] == "Supervisor")
        {
            settings.SettingsPager.Mode = GridViewPagerMode.ShowAllRecords;            
        }
        
        settings.SettingsDetail.AllowOnlyOneMasterRowExpanded = true;
        
        settings.PreRender = (sender, e) => {
            //((MVCxGridView)sender).DetailRows.ExpandRow(0);
        };
    }).Bind(Model).GetHtml()