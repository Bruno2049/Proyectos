using System;
using System.IO;
using System.Xml.Serialization;
using PAEEEM.LogicaNegocios.Tarifas;
using PAEEEM.LogicaNegocios.Trama;

namespace TesterProyecto
{
    class Program
    {
        static void Main(string[] args)
        {
            const string trama = "0A401602115002220131201181DA15A0100101001OPERADORA ALCOMESA S A DE C V LOPEZ MATEOS 701 1 E INDUSTRIAMEXICALI            BC   200271363000020131130201312312014011520131200003892{00003892{00001900024300027000001424009391000000000000000000000000000000000{0000000401099A0000000000000{0000000048535E0000000004586K0000000008992F0000000454041{0000000049944E0000000000000{0000001084410{0000000000000{0000000000000{000000000000{000000000000{0000000000000{88001628100  000           37N30U 00000000000000000080                  00000000000000000000                  00000000000000000000           37N30U 00000000000000000080           37N30U 00000000000000000080                  000000000000000000000                00000000000000000000                00000000000000000000                00000000000000000000                00000000000000000000                00000000000000000000                0000000000000000000000004792800002209104041870000551680000210895304322000067304000192089200484300004440800002009418040060000000000000000000000000000000000902400000002989600000000000000000000000000000000902400000002989600000000000000000000000001180000014200000000000065363358000022597012339009692000000025545000000000000001176270000000000{0000000000000{OAL990226EHA INDUSTRIAL                    FIANZA 182596 $53003.16  SE13.2/300KVA,220/127VCA 368413I9D0000000000000000000000ND10000000580430{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000repartir                      2014011620131217000000113274390000001132740}000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000Dif. Amt.                                                                                                                                                 00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                                                                                                                                                           00000000000000000000000000000000DIC12000044408000020094180400610739ENE13000043512000019094660433210804FEB13000042264000023094200398110582MAR13000053592000024093190428810223   00000000000000000000000000000000ABR13000058808000027092020442100000MAY13000069128000191091450478921315JUN13000078720000217090770503820885JUL13000085080000209090070522219983AGO13000081952000219089860500720609SEP13000067304000192089200484320779OCT13000046696000170089620440222290OCT13000008472000021089530432211256NOV13000047928000022091040418711498DIC1300003892000001909391036841166600   0000   000000000000000000000000000000000{0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000141007000   0000   000000000000000000000000000000000{00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000149000001250000000000000000000001350000012900000000000000000000014500000158000000000000000000000164000001680000000000000000000001850000018400000000000000000000000000000194000001900000000000000000000002150000021700000000000000000000021900000207000000000000000000000220000002180000000000000000000001930000019100000000000000000000016900000170000000000000016200000136000000000000000000000159000001430000000000000000000001420000011800000000000000000000708100015203000029050000000000006707000150900000290500000000000001410000011700000000000000000000015800000142000000000000000000000000000000002013120001000000000000000000000000000000022597000000000000000000969200000000000000000123390000000000000000000000310000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{00000000000000000000000000000000000000000000001420000011800000000000000002703710{1084410{2123280{0000000000000{0000000000000{000000000000000000{0000000000000{                        00000000000000000000000000000{0000000000000{AE        0000160697772014-01-03T14:14:07A000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000 0000000000000000000000000000000000          0000000000000000          0000000000000000          0000000000000000          0000000000000000          0000000000000000          0000000000000000          0000000000000000000000000000000                                                                                                                                                                                                        0120140120          v0201201401152014012020131213201312172013111320131119201310132013101720130914201309202013081420130820201307132013071920130614201306192013051520130521201304132013041820130314201303212013021420130221201301132013012120121214201212192012111420121121201210132012101920120914201209212012081220120820201207142012072020120614201206252012051420120521201204142012042020120314201203232012021320120220                              ";

            var objTrama = new ParseoTrama(trama);


            var x = new XmlSerializer(objTrama.ComplexTrama.GetType());
            x.Serialize(Console.Out, objTrama.ComplexTrama);

            var file = new StreamWriter("..\\Trama" + DateTime.Now.Year + "_" + DateTime.Now.Month + "_" + DateTime.Now.Day + "_" + DateTime.Now.Ticks + ".xml");
            x.Serialize(file, objTrama.ComplexTrama);
            file.Close();

            Console.WriteLine();
            Console.ReadLine();
            
            var tHm = new AlgoritmoTarifaHM(objTrama.ComplexTrama);


            objTrama.ComplexTrama = tHm.ParseoCompleto;
            //objTrama.InsertaResponseData(t03.ParseoCompleto);

            var s = new XmlSerializer(tHm.Thm.GetType());
            s.Serialize(Console.Out, tHm.Thm);

            file = new StreamWriter("..\\TarifaHm" + DateTime.Now.Year + "_" + DateTime.Now.Month + "_" + DateTime.Now.Day + "_" + DateTime.Now.Ticks + ".xml");
            s.Serialize(file, tHm.Thm);
            file.Close();

            Console.WriteLine();
            Console.ReadLine();

            //string caden = "0A407704040136120140101739DP09B0139519853HERNANDEZ GUERRERO ALMA ALICIAAND 1 LOCAL 6 INT MERC 12 OCT QUERETARO           QRO. N01402162H60 20131128201401282014020920140100000003A00000003A00000000000200000200000000000000999900000000000000000000000000000{0000000001741G0000000000000{0000000000000{0000000000000{0000000000000{0000000001741G0000000000278F0000000000139C0000000002160{0000000000000{0000000000000{000000000000{000000000000{0000000000000{88001628601  0000051Cons   28F3X6 00624006550003100001                  00000000000000000000                  00000000000000000000                  00000000000000000000                  00000000000000000000                  000000000000000000000                00000000000000000000                00000000000000000000                00000000000000000000                00000000000000000000                00000000000000000000                0000000000000000000000000001600000000000000000000000270000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000{0000000000000{             CERRITO COLORADO              MERCADO 12 DE OCTUBRE                             000005G5C0000000000000000000000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{00000  00000000000000{00000000000{0000000000{000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000repartir                      2014021020131216000000000172570000000001720}201203000000017002720120500000001500242012070000000150026201209000000020003220121100000000000002013010000000000000201303000000016002720130500000001700282013070000000100017201309000000027004320131100000001600260000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000                                                                                                                                                          00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                     00000000000000{00000000000{0000000000{                                                                                                                                      00000                00000000000000000000000000000000MAR12000000017000000000000000083824MAY12000000015000000000000000091213JUL12000000015000000000000000091660SEP12000000020000000000000000075140NOV12000000000000000000000000000000ENE13000000000000000000000000000000MAR13000000016000000000000000087094MAY13000000017000000000000000083147JUL13000000010000000000000000025230SEP13000000027000000000000000060530NOV13000000016000000000000000086894ENE14000000031000000000000000056184   00000000000000000000000000000000   00000000000000000000000000000000   0000000000000000000000000000000000   0000   000000000000000000000000000000000{0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000   0000   000000000000000000000000000000000{00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002013120002000000005187000000003100000000022720000000000000000002743000000000000000000302000000000000000000000000610000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{000000000000000000000000000000000{00000000000000000000000000000000000000000000000000000000000000000000000000000000{0000000{0000000{0000000000000{0000000000000{002000000000000000{0000000000000{                        00000000000000000000000000000{0000000000000{PE        0000121889652014-01-29T18:39:54A000000000000000000000000000000000000000016201311012013092720131128N000000172000000001720000000000000000000027201309012013072620130927N000000203000000002030000000000000000000010201307012013052820130726N000000155000000001550000000000000000000017201305012013032820130528N000000175000000001750000000000000000000016201303012013012820130328N000000173000000001730000000000000000000000201301022012092720130128A000000259000000002590000000000000000000020201209012012072620120927N000000186000000001860000000000000000000015201207012012052920120726N000000171000000001710000000000000000000015201205012012032820120529N000000169000000001690000000000000000000017201203012012012620120328N000000177000000001770000000000000000000023201201012011112920120126N0000001910000000019100000000000000          0000000000000000          0000000000000000          0000000000000000          0000000000000000          0000000000000000          0000000000000000          0000000000000000000000000000000                                                                                                                                                                                                        0120140207          v0201201402092014020720131213201312162013101220131013201308102013080920130610201306092013041220130411201302102013021320121012201210122012081020120813201206112012061320120412201204120000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
            //Console.WriteLine(caden.Substring(128-1,4-1));
            //Console.ReadLine();
        }
    }
}
